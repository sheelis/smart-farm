<!DOCTYPE html>
<html>
    <head>
        <title>WebSocket json live</title>
    </head>
    <body>
        <script>
            var ws = new WebSocket("ws://127.0.0.1:5678/"); // opens tunnel
            ws.onopen = function(){
                servermsg.innerHTML = servermsg.innerHTML + "<br> - Server connected";
            };
            ws.onmessage = function (event) { // when message comes in
                var jsonparsed = JSON.parse(event.data); // read data and parse json
                document.getElementById('tits').innerText = jsonparsed.time; // update div with the right part of json
                document.getElementById('ass').innerText = jsonparsed.word;
            };
            ws.onclose = function(){
                servermsg.innerHTML = servermsg.innerHTML + "<br> - Server disconnected";
            };
            function postmsg(){
                var text = document.getElementById("message").value;
                ws.send(text);
                servermsg.innerHTML = servermsg.innerHTML + "<br>>> Data sent: " + text;
            }
        </script>
        <div id="tits">tits</div>
        <div id="ass">ass</div>
        <hr>
        <form action="" onSubmit="postmsg();return false;">
            <input type="text" name="message" value="" id="message">
            <input type="submit" name="submit" value="" id="submit">
        </form>
        <hr>
        <div id="servermsg"><h1>Message log:</h1></div>
        
    </body>
</html>